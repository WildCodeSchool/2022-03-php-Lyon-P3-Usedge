{% extends 'base.html.twig' %}

{% block title %}Home{% endblock %}

{% block body %}
	<div
		class="main-container">

		<div class="secondary-container">

			{# Header #}
			<section class="header-container">
				<p class="location-text">RESEARCH CENTER/ALL TEMPLATES</p>
				<h1 class="new-template-title">Create a new template</h1>
			</section>

			<div class="tird-container">
				<div class="fourth-container">

					{# Status of this request #}
					<section class="frame-1123">
						<div class="status-container-1">
							<h2>{{ researchTemplate.name }}</h2>
							<div>
								<img src="{{ asset('build/images/icons/green-dot.png') }}">
								<p>All changes saved</p>
							</div>
						</div>
						<div class="status-container-2">
							<p>Status of this request<span>*</span></p>
							<div>
								<select id="select-status" class="status-list-select bg-grey-dot" aria-label="Default select example">
									{% if researchTemplate.status is same as "active" %}
										<option value="active" selected="selected">Active</option>
									{% else %}
										<option value="active">Active</option>	
									{% endif %}
									{% if researchTemplate.status is same as "draft" %}
										<option value="draft" selected="selected">Draft</option>
									{% else %}
										<option value="draft">Draft</option>
									{% endif %}
									{% if researchTemplate.status is same as "dropped" %}
										<option value="dropped" selected="selected">Dropped</option>
									{% else %}
										<option value="dropped">Dropped</option>
									{% endif %}
								</select>
							</div>
						</div>
					</section>

					{# Components #}
					<section class="components-available">
						<h2>Elements available for your request</h2>
						<p>Select here the elements your team could use.</p>
						<div class="components-list">

							{# Section component #}
							<div class="component">
								<div class="component-picture-1">
									<img class="image" src="{{ asset('build/images/logo_component/section.png') }}" alt="logo section">
								</div>
								<div class="component-title">
									<h3>Section</h3>
									<p class="component-title-text">Delimitate a part of your template.</p>
								</div>
								<div class="component-picture-2">
									<a id="add-section-button" class="buttonAction del-name-separator"><img src="{{ asset('build/images/icons/add_button.png') }}"></a>
								</div>
							</div>
							{% include 'modals/_modal_section.html.twig' %}
							
							{# Single choice component #}
							<div class="component">
								<div class="component-picture-1">
									<img class="image" src="{{ asset('build/images/logo_component/single_choice.png') }}" alt="logo single choice">
								</div>
								<div class="component-title">
									<h3>Single choice</h3>
									<p class="component-title-text">Give a single option for your user.</p>
								</div>
								<div class="component-picture-2">
									<a id="add-single-choice-button" class="buttonAction del-name-separator"><img src="{{ asset('build/images/icons/add_button.png') }}"></a>
								</div>
							</div>
							{% include "modals/_modal_single_choice.html.twig" %}

							{# Date component #}
							<div class="component">
								<div class="component-picture-1">
									<img class="image" src="{{ asset('build/images/logo_component/date.png') }}" alt="logo date">
								</div>
								<div class="component-title">
									<h3>Date</h3>
									<p class="component-title-text">Ask for a date to your user.</p>
								</div>
								<div class="component-picture-2">
									<a id="add-date-picker-button" class="buttonAction del-name-separator"><img src="{{ asset('build/images/icons/add_button.png') }}"></a>
								</div>
							</div>
							{% include "modals/_modal_date_picker.htm.twig" %}

							{# Separator component #}
							<div class="component">
								<div class="component-picture-1">
									<img class="image" src="{{ asset('build/images/logo_component/separator.png') }}" alt="logo separator">
								</div>
								<div class="component-title">
									<h3>Separator</h3>
									<p class="component-title-text">To add some space.</p>
								</div>
								<form class="component-picture-2" method="POST">
									<input type="hidden" id="separator-name" name="name" value="separator">
									<button id="add-separator-button" class="buttonAction"><img src="{{ asset('build/images/icons/add_button.png') }}"></button>
								</form>
							</div>

							{# Multiple choice component #}
							<div class="component">
								<div class="component-picture-1">
									<img class="image" src="{{ asset('build/images/logo_component/multiple_choice.png') }}" alt="logo multiple choice">
								</div>
								<div class="component-title">
									<h3>Multiple choice</h3>
									<p class="component-title-text">Give multiples choices to your user.</p>
								</div>
								<div class="component-picture-2">
									<a id="add-multiple-choice-button" class="buttonAction del-name-separator"><img src="{{ asset('build/images/icons/add_button.png') }}"></a>
								</div>
							</div>
							{% include "modals/_modal_multiple_choice.html.twig" %}

							{# Open question component #}
							<div class="component">
								<div class="component-picture-1">
									<img class="image" src="{{ asset('build/images/logo_component/open_question.png') }}" alt="logo open question">
								</div>
								<div class="component-title">
									<h3>Open question</h3>
									<p class="component-title-text">Get open answers from user.</p>
								</div>
								<div class="component-picture-2">
									<a id="open-question-button" class="buttonAction"><img src="{{ asset('build/images/icons/add_button.png') }}"></a>
								</div>
							</div>
							{% include "modals/_modal_open_question.html.twig" %}
							
							{# EVALUATION SCALE STARTS HERE - DON'T FORGET TO DELETE THIS COMMENT #}
							<div class="component">
								<div class="component-picture-1">
									<img class="image" src="{{ asset('build/images/logo_component/evaluation_scale.png') }}" alt="logo evaluation scale">
								</div>
								<div class="component-title">
									<h3>Evaluation scale</h3>
									<p class="component-title-text">For an optimum overview. </p>
								</div>
								<div class="component-picture-2">
									<a id="evaluation-scale-button" class="buttonAction del-name-separator"><img src="{{ asset('build/images/icons/add_button.png') }}"></a>
								</div>
							</div>
							{% include "modals/_modal_evaluation_scale.html.twig" %}

							{# External link component #}
							<div class="component">
								<div class="component-picture-1">
									<img class="image" src="{{ asset('build/images/logo_component/external_link.png') }}" alt="logo external link">
								</diV>
								<div class="component-title">
									<h3>External link</h3>
									<p class="component-title-text">For an optimum overview.</p>
								</div>
								<div class="component-picture-2">
									<a id="add-external-link-button" class="buttonAction del-name-separator"><img src="{{ asset('build/images/icons/add_button.png') }}"></a>
								</div>
							</div>
							{% include "modals/_modal_external_link.html.twig" %}
						</div>
					</section>

				</div>

				{# Form builder #}
				<form method="post" id="form-builder" class="form-builder">
					<input type="hidden" name="research-template-id" value="{{ researchTemplate.id }}">
					<input type="hidden" name="components-number-count" id="components-number-count">
					<input type="hidden" name="research-template-status" id="research-template-status" value="draft">
					{% if researchTemplate.templateComponents.0.id is defined %}
					<div class="form-builder-component-display" id="display_form_builder">
						{% for error in errors %}
							<p class="text-danger">{{ error }}</p>
						{% endfor %}
						{% for templateComponent in researchTemplate.templateComponents|sort((a, b) => a.numberOrder <=> b.numberOrder) %}
							{% include "display-selected-component/_display_single_choice.html.twig" %}
							{% include "display-selected-component/_display_multiple_choice.html.twig" %}
							{% include "display-selected-component/_display_evaluation_scale.html.twig" %}
							{% include 'display-selected-component/_display_section.html.twig' %}	
							{% include 'display-selected-component/_display_open_question.html.twig' %}	
							{% include 'display-selected-component/_display_separator.html.twig' %}	
							{% include 'display-selected-component/_display_date_picker.html.twig' %}
							{% include 'display-selected-component/_display_external_link.html.twig' %}
						{% endfor %}
					</div>
					<div class="form-builder-save-container">
						<button type="submit" formaction="{{ path('research_template_index') }}" class="form-builder-save-button" id="form-builder-save-button">
							<img class="form-builder-save-button-icon" src="{{ asset('build/images/icons/save-icon.png') }}"/>
							Save / Update this template research request
						</button>
					</div>
					{% endif %}
					{% if researchTemplate.templateComponents is empty %}
						<img src="{{ asset('build/images/icons/empty_state_1.png') }}">
						<h2>No elements have been added to this request template.</h2>
						<p>Use the elements ont he left side to add some elements to this form.</p>
						<div class="need-help-container" onclick="window.open('https://www.google.fr/', '_blank');">
							<img src="{{ asset('build/images/icons/student_hat.png') }}">
							<p>Need help?</p>
						</div>
					{% endif %}
				</form>

			</div>
		</div>
	</div>

{% endblock %}
